var gdjs;(function(s){const p=new s.Logger("Tilemap object");class n{constructor(e,i){this._object=e,this._runtimeScene=i,this._pixiObject===void 0&&(this._pixiObject=new PIXI.tilemap.CompositeRectTileLayer(0)),this._pixiObject.tileAnim=[0,0],i.getLayer("").getRenderer().addRendererObject(this._pixiObject,e.getZOrder()),this.updateAngle(),this.updateOpacity(),this.updateTileMap(),this.updatePosition()}getRendererObject(){return this._pixiObject}incrementAnimationFrameX(e){this._pixiObject.tileAnim[0]+=1}_loadTileMapWithTileset(e,i){const t=PixiTileMapHelper.loadPixiTileMapData(a=>this._runtimeScene.getGame().getImageManager().getPIXITexture(a),i?{...e,tilesets:[i]}:e,this._object._tilemapAtlasImage,this._object._tilemapJsonFile,this._object._tilesetJsonFile);t&&PixiTileMapHelper.updatePixiTileMap(this._pixiObject,t,this._object._displayMode,this._object._layerIndex,pako)}updateTileMap(){this._runtimeScene.getGame().getJsonManager().loadJson(this._object._tilemapJsonFile,(e,i)=>{if(e){p.error("An error happened while loading a Tilemap JSON data:",e);return}this._object._tilesetJsonFile?this._runtimeScene.getGame().getJsonManager().loadJson(this._object._tilesetJsonFile,(t,a)=>{if(t){p.error("An error happened while loading Tileset JSON data:",t);return}this._loadTileMapWithTileset(i,a)}):this._loadTileMapWithTileset(i,null)})}updatePosition(){const e=this._pixiObject.width/this._pixiObject.scale.x,i=this._pixiObject.height/this._pixiObject.scale.y;this._pixiObject.pivot.x=e/2,this._pixiObject.pivot.y=i/2,this._pixiObject.position.x=this._object.x+this._pixiObject.width/2,this._pixiObject.position.y=this._object.y+this._pixiObject.height/2}updateAngle(){this._pixiObject.rotation=s.toRad(this._object.angle)}updateOpacity(){this._pixiObject.alpha=this._object._opacity/255}setWidth(e){this._pixiObject.width=e/this._pixiObject.scale.x,this._pixiObject.pivot.x=e/2,this.updatePosition()}setHeight(e){this._pixiObject.height=e/this._pixiObject.scale.y,this._pixiObject.pivot.y=e/2,this.updatePosition()}getWidth(){return this._pixiObject.width}getHeight(){return this._pixiObject.height}}s.TileMapRuntimeObjectPixiRenderer=n,s.TileMapRuntimeObjectRenderer=s.TileMapRuntimeObjectPixiRenderer})(gdjs||(gdjs={}));
//# sourceMappingURL=tilemapruntimeobject-pixi-renderer.js.map
